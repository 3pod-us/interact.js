import test from '@interactjs/_dev/test/test';
import { drag, resize } from '@interactjs/actions';
import * as helpers from '@interactjs/core/tests/_helpers';
import * as utils from '@interactjs/utils';
import devTools from './';
const { checks, links, prefix } = devTools;
const checkMap = checks.reduce((acc, check) => {
    acc[check.name] = check;
    return acc;
}, {});
test('devTools', t => {
    const scope = helpers.mockScope();
    const logs = [];
    function log(args, type) {
        logs.push({ args, type });
    }
    scope.usePlugin(devTools, {
        logger: {
            warn(...args) { log(args, 'warn'); },
            log(...args) { log(args, 'log'); },
            error(...args) { log(args, 'error'); },
        },
    });
    scope.usePlugin(drag);
    scope.usePlugin(resize);
    const element = scope.document.body.appendChild(scope.document.createElement('div'));
    const event = utils.pointer.coordsToEvent(utils.pointer.newCoords());
    const interactable = scope.interactables.new(element)
        .draggable(true)
        .resizable({ onmove: () => { } });
    const interaction = scope.interactions.new({});
    interaction.pointerDown(event, event, element);
    interaction.start({ name: 'drag' }, interactable, element);
    t.deepEqual(logs[0], { args: [prefix + checkMap.touchAction.text, element, links.touchAction], type: 'warn' }, 'warning about missing touchAction');
    t.deepEqual(logs[1], { args: [prefix + checkMap.noListeners.text, 'drag', interactable], type: 'warn' }, 'warning about missing move listeners');
    interaction.stop();
    // resolve touchAction
    element.style.touchAction = 'none';
    // resolve missing listeners
    interactable.on('dragmove', () => { });
    interaction.start({ name: 'resize' }, interactable, element);
    interaction.pointerMove(event, event, element);
    interaction.end();
    t.deepEqual(logs[2], { args: [prefix + checkMap.boxSizing.text, element, links.boxSizing], type: 'warn' }, 'warning about resizing without "box-sizing: none"');
    // resolve boxSizing
    element.style.boxSizing = 'border-box';
    interaction.start({ name: 'resize' }, interactable, element);
    interaction.move({ event, pointer: event });
    interaction.end();
    interaction.start({ name: 'drag' }, interactable, element);
    interaction.pointerMove(event, event, element);
    interaction.end();
    t.equal(logs.length, 3, 'no warnings when issues are resolved');
    // re-introduce boxSizing issue
    element.style.boxSizing = '';
    interaction.start({ name: 'drag' }, interactable, element);
    interaction.end();
    interactable.options.devTools.ignore = { boxSizing: true };
    interaction.start({ name: 'drag' }, interactable, element);
    interaction.end();
    t.equal(logs.length, 3, 'no warning with options.devTools.ignore');
    t.end();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2VG9vbHMuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRldlRvb2xzLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxJQUFJLE1BQU0sNEJBQTRCLENBQUE7QUFDN0MsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQTtBQUNsRCxPQUFPLEtBQUssT0FBTyxNQUFNLGlDQUFpQyxDQUFBO0FBQzFELE9BQU8sS0FBSyxLQUFLLE1BQU0sbUJBQW1CLENBQUE7QUFDMUMsT0FBTyxRQUEyQixNQUFNLElBQUksQ0FBQTtBQUU1QyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxRQUFRLENBQUE7QUFDMUMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRTtJQUM1QyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQTtJQUN2QixPQUFPLEdBQUcsQ0FBQTtBQUNaLENBQUMsRUFBRSxFQUE4QixDQUFDLENBQUE7QUFFbEMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUNuQixNQUFNLEtBQUssR0FBbUIsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO0lBQ2pELE1BQU0sSUFBSSxHQUErQyxFQUFFLENBQUE7SUFFM0QsU0FBUyxHQUFHLENBQUUsSUFBSSxFQUFFLElBQUk7UUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQzNCLENBQUM7SUFFRCxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRTtRQUN4QixNQUFNLEVBQUU7WUFDTixJQUFJLENBQUUsR0FBRyxJQUFJLElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQSxDQUFDLENBQUM7WUFDcEMsR0FBRyxDQUFFLEdBQUcsSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUEsQ0FBQyxDQUFDO1lBQ2xDLEtBQUssQ0FBRSxHQUFHLElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFBLENBQUMsQ0FBQztTQUN2QztLQUNGLENBQUMsQ0FBQTtJQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDckIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUV2QixNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtJQUNwRixNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUE7SUFDcEUsTUFBTSxZQUFZLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO1NBQ2xELFNBQVMsQ0FBQyxJQUFJLENBQUM7U0FDZixTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUNsQyxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUU5QyxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDOUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRSxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDMUQsQ0FBQyxDQUFDLFNBQVMsQ0FDVCxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQ1AsRUFBRSxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQ3hGLG1DQUFtQyxDQUFDLENBQUE7SUFFdEMsQ0FBQyxDQUFDLFNBQVMsQ0FDVCxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQ1AsRUFBRSxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLFlBQVksQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFDbEYsc0NBQXNDLENBQUMsQ0FBQTtJQUV6QyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUE7SUFFbEIsc0JBQXNCO0lBQ3RCLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQTtJQUNsQyw0QkFBNEI7SUFDNUIsWUFBWSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFDLENBQUE7SUFFckMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRSxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDNUQsV0FBVyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQzlDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtJQUVqQixDQUFDLENBQUMsU0FBUyxDQUNULElBQUksQ0FBQyxDQUFDLENBQUMsRUFDUCxFQUFFLElBQUksRUFBRSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFDcEYsbURBQW1ELENBQUMsQ0FBQTtJQUV0RCxvQkFBb0I7SUFDcEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFBO0lBRXRDLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEVBQUUsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQzVELFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUE7SUFDM0MsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO0lBRWpCLFdBQVcsQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQzFELFdBQVcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUM5QyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7SUFFakIsQ0FBQyxDQUFDLEtBQUssQ0FDTCxJQUFJLENBQUMsTUFBTSxFQUNYLENBQUMsRUFDRCxzQ0FBc0MsQ0FBQyxDQUFBO0lBRXpDLCtCQUErQjtJQUMvQixPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUE7SUFFNUIsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRSxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDMUQsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO0lBRWpCLFlBQVksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQTtJQUUxRCxXQUFXLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUMxRCxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7SUFFakIsQ0FBQyxDQUFDLEtBQUssQ0FDTCxJQUFJLENBQUMsTUFBTSxFQUNYLENBQUMsRUFDRCx5Q0FBeUMsQ0FBQyxDQUFBO0lBRTVDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtBQUNULENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRlc3QgZnJvbSAnQGludGVyYWN0anMvX2Rldi90ZXN0L3Rlc3QnXG5pbXBvcnQgeyBkcmFnLCByZXNpemUgfSBmcm9tICdAaW50ZXJhY3Rqcy9hY3Rpb25zJ1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tICdAaW50ZXJhY3Rqcy9jb3JlL3Rlc3RzL19oZWxwZXJzJ1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnQGludGVyYWN0anMvdXRpbHMnXG5pbXBvcnQgZGV2VG9vbHMsIHsgQ2hlY2ssIExvZ2dlciB9IGZyb20gJy4vJ1xuXG5jb25zdCB7IGNoZWNrcywgbGlua3MsIHByZWZpeCB9ID0gZGV2VG9vbHNcbmNvbnN0IGNoZWNrTWFwID0gY2hlY2tzLnJlZHVjZSgoYWNjLCBjaGVjaykgPT4ge1xuICBhY2NbY2hlY2submFtZV0gPSBjaGVja1xuICByZXR1cm4gYWNjXG59LCB7fSBhcyB7IFtuYW1lOiBzdHJpbmddOiBDaGVja30pXG5cbnRlc3QoJ2RldlRvb2xzJywgdCA9PiB7XG4gIGNvbnN0IHNjb3BlOiBJbnRlcmFjdC5TY29wZSA9IGhlbHBlcnMubW9ja1Njb3BlKClcbiAgY29uc3QgbG9nczogQXJyYXk8eyBhcmdzOiBhbnlbXSwgdHlwZToga2V5b2YgTG9nZ2VyIH0+ID0gW11cblxuICBmdW5jdGlvbiBsb2cgKGFyZ3MsIHR5cGUpIHtcbiAgICBsb2dzLnB1c2goeyBhcmdzLCB0eXBlIH0pXG4gIH1cblxuICBzY29wZS51c2VQbHVnaW4oZGV2VG9vbHMsIHtcbiAgICBsb2dnZXI6IHtcbiAgICAgIHdhcm4gKC4uLmFyZ3MpIHsgbG9nKGFyZ3MsICd3YXJuJykgfSxcbiAgICAgIGxvZyAoLi4uYXJncykgeyBsb2coYXJncywgJ2xvZycpIH0sXG4gICAgICBlcnJvciAoLi4uYXJncykgeyBsb2coYXJncywgJ2Vycm9yJykgfSxcbiAgICB9LFxuICB9KVxuXG4gIHNjb3BlLnVzZVBsdWdpbihkcmFnKVxuICBzY29wZS51c2VQbHVnaW4ocmVzaXplKVxuXG4gIGNvbnN0IGVsZW1lbnQgPSBzY29wZS5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjb3BlLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxuICBjb25zdCBldmVudCA9IHV0aWxzLnBvaW50ZXIuY29vcmRzVG9FdmVudCh1dGlscy5wb2ludGVyLm5ld0Nvb3JkcygpKVxuICBjb25zdCBpbnRlcmFjdGFibGUgPSBzY29wZS5pbnRlcmFjdGFibGVzLm5ldyhlbGVtZW50KVxuICAgIC5kcmFnZ2FibGUodHJ1ZSlcbiAgICAucmVzaXphYmxlKHsgb25tb3ZlOiAoKSA9PiB7fSB9KVxuICBjb25zdCBpbnRlcmFjdGlvbiA9IHNjb3BlLmludGVyYWN0aW9ucy5uZXcoe30pXG5cbiAgaW50ZXJhY3Rpb24ucG9pbnRlckRvd24oZXZlbnQsIGV2ZW50LCBlbGVtZW50KVxuICBpbnRlcmFjdGlvbi5zdGFydCh7IG5hbWU6ICdkcmFnJyB9LCBpbnRlcmFjdGFibGUsIGVsZW1lbnQpXG4gIHQuZGVlcEVxdWFsKFxuICAgIGxvZ3NbMF0sXG4gICAgeyBhcmdzOiBbcHJlZml4ICsgY2hlY2tNYXAudG91Y2hBY3Rpb24udGV4dCwgZWxlbWVudCwgbGlua3MudG91Y2hBY3Rpb25dLCB0eXBlOiAnd2FybicgfSxcbiAgICAnd2FybmluZyBhYm91dCBtaXNzaW5nIHRvdWNoQWN0aW9uJylcblxuICB0LmRlZXBFcXVhbChcbiAgICBsb2dzWzFdLFxuICAgIHsgYXJnczogW3ByZWZpeCArIGNoZWNrTWFwLm5vTGlzdGVuZXJzLnRleHQsICdkcmFnJywgaW50ZXJhY3RhYmxlXSwgdHlwZTogJ3dhcm4nIH0sXG4gICAgJ3dhcm5pbmcgYWJvdXQgbWlzc2luZyBtb3ZlIGxpc3RlbmVycycpXG5cbiAgaW50ZXJhY3Rpb24uc3RvcCgpXG5cbiAgLy8gcmVzb2x2ZSB0b3VjaEFjdGlvblxuICBlbGVtZW50LnN0eWxlLnRvdWNoQWN0aW9uID0gJ25vbmUnXG4gIC8vIHJlc29sdmUgbWlzc2luZyBsaXN0ZW5lcnNcbiAgaW50ZXJhY3RhYmxlLm9uKCdkcmFnbW92ZScsICgpID0+IHt9KVxuXG4gIGludGVyYWN0aW9uLnN0YXJ0KHsgbmFtZTogJ3Jlc2l6ZScgfSwgaW50ZXJhY3RhYmxlLCBlbGVtZW50KVxuICBpbnRlcmFjdGlvbi5wb2ludGVyTW92ZShldmVudCwgZXZlbnQsIGVsZW1lbnQpXG4gIGludGVyYWN0aW9uLmVuZCgpXG5cbiAgdC5kZWVwRXF1YWwoXG4gICAgbG9nc1syXSxcbiAgICB7IGFyZ3M6IFtwcmVmaXggKyBjaGVja01hcC5ib3hTaXppbmcudGV4dCwgZWxlbWVudCwgbGlua3MuYm94U2l6aW5nXSwgdHlwZTogJ3dhcm4nIH0sXG4gICAgJ3dhcm5pbmcgYWJvdXQgcmVzaXppbmcgd2l0aG91dCBcImJveC1zaXppbmc6IG5vbmVcIicpXG5cbiAgLy8gcmVzb2x2ZSBib3hTaXppbmdcbiAgZWxlbWVudC5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCdcblxuICBpbnRlcmFjdGlvbi5zdGFydCh7IG5hbWU6ICdyZXNpemUnIH0sIGludGVyYWN0YWJsZSwgZWxlbWVudClcbiAgaW50ZXJhY3Rpb24ubW92ZSh7IGV2ZW50LCBwb2ludGVyOiBldmVudCB9KVxuICBpbnRlcmFjdGlvbi5lbmQoKVxuXG4gIGludGVyYWN0aW9uLnN0YXJ0KHsgbmFtZTogJ2RyYWcnIH0sIGludGVyYWN0YWJsZSwgZWxlbWVudClcbiAgaW50ZXJhY3Rpb24ucG9pbnRlck1vdmUoZXZlbnQsIGV2ZW50LCBlbGVtZW50KVxuICBpbnRlcmFjdGlvbi5lbmQoKVxuXG4gIHQuZXF1YWwoXG4gICAgbG9ncy5sZW5ndGgsXG4gICAgMyxcbiAgICAnbm8gd2FybmluZ3Mgd2hlbiBpc3N1ZXMgYXJlIHJlc29sdmVkJylcblxuICAvLyByZS1pbnRyb2R1Y2UgYm94U2l6aW5nIGlzc3VlXG4gIGVsZW1lbnQuc3R5bGUuYm94U2l6aW5nID0gJydcblxuICBpbnRlcmFjdGlvbi5zdGFydCh7IG5hbWU6ICdkcmFnJyB9LCBpbnRlcmFjdGFibGUsIGVsZW1lbnQpXG4gIGludGVyYWN0aW9uLmVuZCgpXG5cbiAgaW50ZXJhY3RhYmxlLm9wdGlvbnMuZGV2VG9vbHMuaWdub3JlID0geyBib3hTaXppbmc6IHRydWUgfVxuXG4gIGludGVyYWN0aW9uLnN0YXJ0KHsgbmFtZTogJ2RyYWcnIH0sIGludGVyYWN0YWJsZSwgZWxlbWVudClcbiAgaW50ZXJhY3Rpb24uZW5kKClcblxuICB0LmVxdWFsKFxuICAgIGxvZ3MubGVuZ3RoLFxuICAgIDMsXG4gICAgJ25vIHdhcm5pbmcgd2l0aCBvcHRpb25zLmRldlRvb2xzLmlnbm9yZScpXG5cbiAgdC5lbmQoKVxufSlcbiJdfQ==