import test from '@interactjs/_dev/test/test';
import * as utils from '@interactjs/utils';
import DropEvent from '../drop/DropEvent';
const dz1 = { target: 'dz1', fire(event) { this.fired = event; } };
const dz2 = { target: 'dz2', fire(event) { this.fired = event; } };
const el1 = Symbol('el1');
const el2 = Symbol('el2');
const interactable = Symbol('interactable');
const dragElement = Symbol('drag-el');
test('DropEvent constructor', t => {
    const interaction = { dropState: {} };
    const dragEvent = Object.freeze({
        interactable,
        _interaction: interaction,
        target: dragElement,
        timeStamp: 10,
    });
    utils.extend(interaction.dropState, {
        activeDrops: [
            { dropzone: dz1, element: el1 },
            { dropzone: dz2, element: el2 },
        ],
        cur: { dropzone: dz1, element: el1 },
        prev: { dropzone: dz2, element: el2 },
        events: {},
    });
    const dropmove = new DropEvent(interaction.dropState, dragEvent, 'dropmove');
    t.equal(dropmove.target, el1, 'dropmove uses dropState.cur.element');
    t.equal(dropmove.dropzone, dz1, 'dropmove uses dropState.cur.dropzone');
    t.equal(dropmove.relatedTarget, dragElement);
    const dragleave = new DropEvent(interaction.dropState, dragEvent, 'dragleave');
    t.equal(dragleave.target, el2, 'dropmove uses dropState.prev.element');
    t.equal(dragleave.dropzone, dz2, 'dropmove uses dropState.prev.dropzone');
    t.equal(dragleave.relatedTarget, dragElement);
    t.end();
});
test('DropEvent.reject()', t => {
    const interaction = { dropState: {} };
    const dragEvent = Object.freeze({
        interactable,
        _interaction: interaction,
        target: dragElement,
        timeStamp: 10,
    });
    utils.extend(interaction.dropState, {
        activeDrops: [
            { dropzone: dz1, element: el1 },
            { dropzone: dz2, element: el2 },
        ],
        cur: { dropzone: null, element: null },
        prev: { dropzone: null, element: null },
        events: {},
    });
    const dropactivate = new DropEvent(interaction.dropState, dragEvent, 'dropactivate');
    dropactivate.dropzone = dz1;
    dropactivate.target = el1;
    dropactivate.reject();
    t.ok(dropactivate.propagationStopped && dropactivate.immediatePropagationStopped, 'rejected event propagation is stopped');
    t.equal(dz1.fired.type, 'dropdeactivate', 'dropdeactivate is fired on rejected dropzone');
    t.deepEqual(interaction.dropState.activeDrops, [{ dropzone: dz2, element: el2 }], 'activeDrop of rejected dropactivate event is removed');
    t.deepEqual(interaction.dropState.cur, { dropzone: null, element: null }, 'dropState.cur dropzone and element are set to null after rejecting dropactivate');
    utils.extend(interaction.dropState, {
        cur: { dropzone: dz1, element: el1 },
        prev: { dropzone: null, element: null },
        events: {},
    });
    const dropmove = new DropEvent(interaction.dropState, dragEvent, 'dropmove');
    dropmove.reject();
    t.deepEqual(interaction.dropState.cur, { dropzone: dz1, element: el1 }, 'dropState.cur remains the same after rejecting non activate event');
    t.ok(interaction.dropState.rejected, 'dropState.rejected === true');
    t.equal(dz1.fired.type, 'dragleave', 'dragleave is fired on rejected dropzone');
    t.end();
});
test('DropEvent.stop[Immediate]Propagation()', t => {
    const dropEvent = new DropEvent({ cur: {} }, {}, 'dragmove');
    t.notOk(dropEvent.propagationStopped || dropEvent.immediatePropagationStopped);
    dropEvent.stopPropagation();
    t.ok(dropEvent.propagationStopped);
    t.notOk(dropEvent.immediatePropagationStopped);
    dropEvent.propagationStopped = false;
    dropEvent.stopImmediatePropagation();
    t.ok(dropEvent.propagationStopped && dropEvent.immediatePropagationStopped);
    t.end();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRHJvcEV2ZW50LnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJEcm9wRXZlbnQuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLElBQUksTUFBTSw0QkFBNEIsQ0FBQTtBQUU3QyxPQUFPLEtBQUssS0FBSyxNQUFNLG1CQUFtQixDQUFBO0FBQzFDLE9BQU8sU0FBUyxNQUFNLG1CQUFtQixDQUFBO0FBRXpDLE1BQU0sR0FBRyxHQUFRLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUUsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBLENBQUMsQ0FBQyxFQUFFLENBQUE7QUFDdkUsTUFBTSxHQUFHLEdBQVEsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBRSxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUEsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtBQUN2RSxNQUFNLEdBQUcsR0FBUSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDOUIsTUFBTSxHQUFHLEdBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzlCLE1BQU0sWUFBWSxHQUFRLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQTtBQUNoRCxNQUFNLFdBQVcsR0FBUSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUE7QUFFMUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ2hDLE1BQU0sV0FBVyxHQUFRLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFBO0lBQzFDLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDOUIsWUFBWTtRQUNaLFlBQVksRUFBRSxXQUFXO1FBQ3pCLE1BQU0sRUFBRSxXQUFXO1FBQ25CLFNBQVMsRUFBRSxFQUFFO0tBQ2QsQ0FBa0IsQ0FBQTtJQUVuQixLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUU7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Q1QsQ0FBQyxDQUFDLENBQUE7QUFFRixJQUFJLENBQUMsd0NBQXdDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDakQsTUFBTSxTQUFTLEdBQUcsSUFBSSxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFTLEVBQUUsRUFBUyxFQUFFLFVBQVUsQ0FBQyxDQUFBO0lBRTFFLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLGtCQUFrQixJQUFJLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO0lBRTlFLFNBQVMsQ0FBQyxlQUFlLEVBQUUsQ0FBQTtJQUMzQixDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO0lBQ2xDLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLDJCQUEyQixDQUFDLENBQUE7SUFFOUMsU0FBUyxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQTtJQUVwQyxTQUFTLENBQUMsd0JBQXdCLEVBQUUsQ0FBQTtJQUNwQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsSUFBSSxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtJQUUzRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDVCxDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0ZXN0IGZyb20gJ0BpbnRlcmFjdGpzL19kZXYvdGVzdC90ZXN0J1xuaW1wb3J0IEludGVyYWN0RXZlbnQgZnJvbSAnQGludGVyYWN0anMvY29yZS9JbnRlcmFjdEV2ZW50J1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnQGludGVyYWN0anMvdXRpbHMnXG5pbXBvcnQgRHJvcEV2ZW50IGZyb20gJy4uL2Ryb3AvRHJvcEV2ZW50J1xuXG5jb25zdCBkejE6IGFueSA9IHsgdGFyZ2V0OiAnZHoxJywgZmlyZSAoZXZlbnQpIHsgdGhpcy5maXJlZCA9IGV2ZW50IH0gfVxuY29uc3QgZHoyOiBhbnkgPSB7IHRhcmdldDogJ2R6MicsIGZpcmUgKGV2ZW50KSB7IHRoaXMuZmlyZWQgPSBldmVudCB9IH1cbmNvbnN0IGVsMTogYW55ID0gU3ltYm9sKCdlbDEnKVxuY29uc3QgZWwyOiBhbnkgPSBTeW1ib2woJ2VsMicpXG5jb25zdCBpbnRlcmFjdGFibGU6IGFueSA9IFN5bWJvbCgnaW50ZXJhY3RhYmxlJylcbmNvbnN0IGRyYWdFbGVtZW50OiBhbnkgPSBTeW1ib2woJ2RyYWctZWwnKVxuXG50ZXN0KCdEcm9wRXZlbnQgY29uc3RydWN0b3InLCB0ID0+IHtcbiAgY29uc3QgaW50ZXJhY3Rpb246IGFueSA9IHsgZHJvcFN0YXRlOiB7fSB9XG4gIGNvbnN0IGRyYWdFdmVudCA9IE9iamVjdC5mcmVlemUoe1xuICAgIGludGVyYWN0YWJsZSxcbiAgICBfaW50ZXJhY3Rpb246IGludGVyYWN0aW9uLFxuICAgIHRhcmdldDogZHJhZ0VsZW1lbnQsXG4gICAgdGltZVN0YW1wOiAxMCxcbiAgfSkgYXMgSW50ZXJhY3RFdmVudFxuXG4gIHV0aWxzLmV4dGVuZChpbnRlcmFjdGlvbi5kcm9wU3RhdGUsIHtcbiAgICBhY3RpdmVEcm9wczogW1xuICAgICAgeyBkcm9wem9uZTogZHoxLCBlbGVtZW50OiBlbDEgfSxcbiAgICAgIHsgZHJvcHpvbmU6IGR6MiwgZWxlbWVudDogZWwyIH0sXG4gICAgXSxcbiAgICBjdXIgOiB7IGRyb3B6b25lOiBkejEsIGVsZW1lbnQ6IGVsMSB9LFxuICAgIHByZXY6IHsgZHJvcHpvbmU6IGR6MiwgZWxlbWVudDogZWwyIH0sXG4gICAgZXZlbnRzOiB7fSxcbiAgfSlcblxuICBjb25zdCBkcm9wbW92ZSA9IG5ldyBEcm9wRXZlbnQoaW50ZXJhY3Rpb24uZHJvcFN0YXRlLCBkcmFnRXZlbnQsICdkcm9wbW92ZScpXG5cbiAgdC5lcXVhbChkcm9wbW92ZS50YXJnZXQsIGVsMSwgJ2Ryb3Btb3ZlIHVzZXMgZHJvcFN0YXRlLmN1ci5lbGVtZW50JylcbiAgdC5lcXVhbChkcm9wbW92ZS5kcm9wem9uZSwgZHoxLCAnZHJvcG1vdmUgdXNlcyBkcm9wU3RhdGUuY3VyLmRyb3B6b25lJylcbiAgdC5lcXVhbChkcm9wbW92ZS5yZWxhdGVkVGFyZ2V0LCBkcmFnRWxlbWVudClcblxuICBjb25zdCBkcmFnbGVhdmUgPSBuZXcgRHJvcEV2ZW50KGludGVyYWN0aW9uLmRyb3BTdGF0ZSwgZHJhZ0V2ZW50LCAnZHJhZ2xlYXZlJylcblxuICB0LmVxdWFsKGRyYWdsZWF2ZS50YXJnZXQsIGVsMiwgJ2Ryb3Btb3ZlIHVzZXMgZHJvcFN0YXRlLnByZXYuZWxlbWVudCcpXG4gIHQuZXF1YWwoZHJhZ2xlYXZlLmRyb3B6b25lLCBkejIsICdkcm9wbW92ZSB1c2VzIGRyb3BTdGF0ZS5wcmV2LmRyb3B6b25lJylcbiAgdC5lcXVhbChkcmFnbGVhdmUucmVsYXRlZFRhcmdldCwgZHJhZ0VsZW1lbnQpXG5cbiAgdC5lbmQoKVxufSlcblxudGVzdCgnRHJvcEV2ZW50LnJlamVjdCgpJywgdCA9PiB7XG4gIGNvbnN0IGludGVyYWN0aW9uOiBhbnkgPSB7IGRyb3BTdGF0ZToge30gfVxuICBjb25zdCBkcmFnRXZlbnQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBpbnRlcmFjdGFibGUsXG4gICAgX2ludGVyYWN0aW9uOiBpbnRlcmFjdGlvbixcbiAgICB0YXJnZXQ6IGRyYWdFbGVtZW50LFxuICAgIHRpbWVTdGFtcDogMTAsXG4gIH0pIGFzIEludGVyYWN0RXZlbnRcblxuICB1dGlscy5leHRlbmQoaW50ZXJhY3Rpb24uZHJvcFN0YXRlLCB7XG4gICAgYWN0aXZlRHJvcHM6IFtcbiAgICAgIHsgZHJvcHpvbmU6IGR6MSwgZWxlbWVudDogZWwxIH0sXG4gICAgICB7IGRyb3B6b25lOiBkejIsIGVsZW1lbnQ6IGVsMiB9LFxuICAgIF0sXG4gICAgY3VyIDogeyBkcm9wem9uZTogbnVsbCwgZWxlbWVudDogbnVsbCB9LFxuICAgIHByZXY6IHsgZHJvcHpvbmU6IG51bGwsIGVsZW1lbnQ6IG51bGwgfSxcbiAgICBldmVudHM6IHt9LFxuICB9KVxuXG4gIGNvbnN0IGRyb3BhY3RpdmF0ZSA9IG5ldyBEcm9wRXZlbnQoaW50ZXJhY3Rpb24uZHJvcFN0YXRlLCBkcmFnRXZlbnQsICdkcm9wYWN0aXZhdGUnKVxuXG4gIGRyb3BhY3RpdmF0ZS5kcm9wem9uZSA9IGR6MVxuICBkcm9wYWN0aXZhdGUudGFyZ2V0ID0gZWwxXG4gIGRyb3BhY3RpdmF0ZS5yZWplY3QoKVxuXG4gIHQub2soZHJvcGFjdGl2YXRlLnByb3BhZ2F0aW9uU3RvcHBlZCAmJiBkcm9wYWN0aXZhdGUuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkLFxuICAgICdyZWplY3RlZCBldmVudCBwcm9wYWdhdGlvbiBpcyBzdG9wcGVkJylcblxuICB0LmVxdWFsKGR6MS5maXJlZC50eXBlLCAnZHJvcGRlYWN0aXZhdGUnLCAnZHJvcGRlYWN0aXZhdGUgaXMgZmlyZWQgb24gcmVqZWN0ZWQgZHJvcHpvbmUnKVxuXG4gIHQuZGVlcEVxdWFsKFxuICAgIGludGVyYWN0aW9uLmRyb3BTdGF0ZS5hY3RpdmVEcm9wcyxcbiAgICBbeyBkcm9wem9uZTogZHoyLCBlbGVtZW50OiBlbDIgfV0sXG4gICAgJ2FjdGl2ZURyb3Agb2YgcmVqZWN0ZWQgZHJvcGFjdGl2YXRlIGV2ZW50IGlzIHJlbW92ZWQnKVxuXG4gIHQuZGVlcEVxdWFsKFxuICAgIGludGVyYWN0aW9uLmRyb3BTdGF0ZS5jdXIsXG4gICAgeyBkcm9wem9uZTogbnVsbCwgZWxlbWVudDogbnVsbCB9LFxuICAgICdkcm9wU3RhdGUuY3VyIGRyb3B6b25lIGFuZCBlbGVtZW50IGFyZSBzZXQgdG8gbnVsbCBhZnRlciByZWplY3RpbmcgZHJvcGFjdGl2YXRlJylcblxuICB1dGlscy5leHRlbmQoaW50ZXJhY3Rpb24uZHJvcFN0YXRlLCB7XG4gICAgY3VyIDogeyBkcm9wem9uZTogZHoxLCBlbGVtZW50OiBlbDEgfSxcbiAgICBwcmV2OiB7IGRyb3B6b25lOiBudWxsLCBlbGVtZW50OiBudWxsIH0sXG4gICAgZXZlbnRzOiB7fSxcbiAgfSlcblxuICBjb25zdCBkcm9wbW92ZSA9IG5ldyBEcm9wRXZlbnQoaW50ZXJhY3Rpb24uZHJvcFN0YXRlLCBkcmFnRXZlbnQsICdkcm9wbW92ZScpXG5cbiAgZHJvcG1vdmUucmVqZWN0KClcblxuICB0LmRlZXBFcXVhbChcbiAgICBpbnRlcmFjdGlvbi5kcm9wU3RhdGUuY3VyLFxuICAgIHsgZHJvcHpvbmU6IGR6MSwgZWxlbWVudDogZWwxIH0sXG4gICAgJ2Ryb3BTdGF0ZS5jdXIgcmVtYWlucyB0aGUgc2FtZSBhZnRlciByZWplY3Rpbmcgbm9uIGFjdGl2YXRlIGV2ZW50JylcblxuICB0Lm9rKGludGVyYWN0aW9uLmRyb3BTdGF0ZS5yZWplY3RlZCwgJ2Ryb3BTdGF0ZS5yZWplY3RlZCA9PT0gdHJ1ZScpXG5cbiAgdC5lcXVhbChkejEuZmlyZWQudHlwZSwgJ2RyYWdsZWF2ZScsICdkcmFnbGVhdmUgaXMgZmlyZWQgb24gcmVqZWN0ZWQgZHJvcHpvbmUnKVxuXG4gIHQuZW5kKClcbn0pXG5cbnRlc3QoJ0Ryb3BFdmVudC5zdG9wW0ltbWVkaWF0ZV1Qcm9wYWdhdGlvbigpJywgdCA9PiB7XG4gIGNvbnN0IGRyb3BFdmVudCA9IG5ldyBEcm9wRXZlbnQoeyBjdXI6IHt9IH0gYXMgYW55LCB7fSBhcyBhbnksICdkcmFnbW92ZScpXG5cbiAgdC5ub3RPayhkcm9wRXZlbnQucHJvcGFnYXRpb25TdG9wcGVkIHx8IGRyb3BFdmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpXG5cbiAgZHJvcEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIHQub2soZHJvcEV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZClcbiAgdC5ub3RPayhkcm9wRXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKVxuXG4gIGRyb3BFdmVudC5wcm9wYWdhdGlvblN0b3BwZWQgPSBmYWxzZVxuXG4gIGRyb3BFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxuICB0Lm9rKGRyb3BFdmVudC5wcm9wYWdhdGlvblN0b3BwZWQgJiYgZHJvcEV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZClcblxuICB0LmVuZCgpXG59KVxuIl19