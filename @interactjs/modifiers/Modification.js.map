{
	"version": 3,
	"sources": [
		"Modification.ts"
	],
	"names": [
		"clone",
		"extend",
		"rectUtils",
		"Modification",
		"constructor",
		"interaction",
		"left",
		"right",
		"top",
		"bottom",
		"result",
		"createResult",
		"start",
		"phase",
		"pageCoords",
		"modifierList",
		"getModifierList",
		"prepareStates",
		"edges",
		"startOffset",
		"getRectOffset",
		"rect",
		"startDelta",
		"x",
		"y",
		"arg",
		"preEnd",
		"startAll",
		"setAll",
		"fillArg",
		"interactable",
		"element",
		"state",
		"states",
		"methods",
		"skipModifiers",
		"unmodifiedRect",
		"coords",
		"slice",
		"newResult",
		"options",
		"lastModifierCoords",
		"returnValue",
		"set",
		"shouldDo",
		"addEdges",
		"eventProps",
		"push",
		"delta",
		"rectDelta",
		"prevCoords",
		"prevRect",
		"rectChanged",
		"changed",
		"applyToInteraction",
		"curCoords",
		"cur",
		"startCoords",
		"curDelta",
		"coordsSet",
		"page",
		"client",
		"width",
		"height",
		"setAndApply",
		"modifiedCoords",
		"length",
		"interacting",
		"adjustment",
		"beforeEnd",
		"event",
		"doPreend",
		"endPosition",
		"endResult",
		"move",
		"stop",
		"modifierArg",
		"index",
		"name",
		"enabled",
		"restoreInteractionCoords",
		"modification",
		"coordsAndDeltas",
		"requireEndOnly",
		"endOnly",
		"setStart",
		"copyFrom",
		"other",
		"map",
		"s",
		"destroy",
		"prop",
		"actionOptions",
		"prepared",
		"actionModifiers",
		"modifiers",
		"filter",
		"modifier",
		"type",
		"_methods",
		"m"
	],
	"mappings": "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",
	"sourcesContent": [
		"import clone from '@interactjs/utils/clone'\nimport extend from '@interactjs/utils/extend'\nimport * as rectUtils from '@interactjs/utils/rect'\nimport { Modifier, ModifierArg, ModifierState } from './base'\n\nexport interface ModificationResult {\n  delta: Interact.Point\n  rectDelta: Interact.Rect\n  coords: Interact.Point\n  rect: Interact.FullRect\n  eventProps: any[]\n  changed: boolean\n}\n\ninterface MethodArg {\n  phase: Interact.EventPhase\n  pageCoords?: Interact.Point\n  rect?: Interact.FullRect\n  coords?: Interact.Point\n  preEnd?: boolean\n  skipModifiers?: number\n}\n\nexport default class Modification {\n  states: ModifierState[] = []\n  startOffset: Interact.Rect = { left: 0, right: 0, top: 0, bottom: 0 }\n  startDelta: Interact.Point = null\n  result?: ModificationResult = null\n  endResult?: Interact.Point = null\n  edges: Interact.EdgeOptions\n\n  constructor (readonly interaction: Readonly<Interact.Interaction>) {\n    this.result = createResult()\n  }\n\n  start (\n    { phase }: MethodArg,\n    pageCoords: Interact.Point,\n  ) {\n    const { interaction } = this\n    const modifierList = getModifierList(interaction)\n    this.prepareStates(modifierList)\n\n    this.edges = extend({}, interaction.edges)\n    this.startOffset = getRectOffset(interaction.rect, pageCoords)\n    this.startDelta = { x: 0, y: 0 }\n\n    const arg: MethodArg = {\n      phase,\n      pageCoords,\n      preEnd: false,\n    }\n\n    this.result = createResult()\n    this.startAll(arg)\n\n    const result = this.result = this.setAll(arg)\n\n    return result\n  }\n\n  fillArg (arg: Partial<ModifierArg>) {\n    const { interaction } = this\n\n    arg.interaction = interaction\n    arg.interactable = interaction.interactable\n    arg.element = interaction.element\n    arg.rect = arg.rect || interaction.rect\n    arg.edges = this.edges\n    arg.startOffset = this.startOffset\n  }\n\n  startAll (arg: MethodArg & Partial<ModifierArg>) {\n    this.fillArg(arg)\n\n    for (const state of this.states) {\n      if (state.methods.start) {\n        arg.state = state\n        state.methods.start(arg as ModifierArg)\n      }\n    }\n  }\n\n  setAll (arg: MethodArg & Partial<ModifierArg>): ModificationResult {\n    this.fillArg(arg)\n\n    const {\n      phase,\n      preEnd,\n      skipModifiers,\n      rect: unmodifiedRect,\n    } = arg\n\n    arg.coords = extend({}, arg.pageCoords)\n    arg.rect = extend({}, unmodifiedRect)\n\n    const states = skipModifiers\n      ? this.states.slice(skipModifiers)\n      : this.states\n\n    const newResult = createResult(arg.coords, arg.rect)\n\n    for (const state of states) {\n      const { options } = state\n      const lastModifierCoords = extend({}, arg.coords)\n      let returnValue = null\n\n      if (state.methods.set && this.shouldDo(options, preEnd, phase)) {\n        arg.state = state\n        returnValue = state.methods.set(arg as ModifierArg)\n\n        rectUtils.addEdges(this.interaction.edges, arg.rect, { x: arg.coords.x - lastModifierCoords.x, y: arg.coords.y - lastModifierCoords.y })\n      }\n\n      newResult.eventProps.push(returnValue)\n    }\n\n    newResult.delta.x = arg.coords.x - arg.pageCoords.x\n    newResult.delta.y = arg.coords.y - arg.pageCoords.y\n\n    newResult.rectDelta.left   = arg.rect.left - unmodifiedRect.left\n    newResult.rectDelta.right  = arg.rect.right - unmodifiedRect.right\n    newResult.rectDelta.top    = arg.rect.top - unmodifiedRect.top\n    newResult.rectDelta.bottom = arg.rect.bottom - unmodifiedRect.bottom\n\n    const prevCoords = this.result.coords\n    const prevRect = this.result.rect\n\n    if (prevCoords && prevRect) {\n      const rectChanged = newResult.rect.left !== prevRect.left ||\n        newResult.rect.right !== prevRect.right ||\n        newResult.rect.top !== prevRect.top ||\n        newResult.rect.bottom !== prevRect.bottom\n\n      newResult.changed = rectChanged ||\n        prevCoords.x !== newResult.coords.x ||\n        prevCoords.y !== newResult.coords.y\n    }\n\n    return newResult\n  }\n\n  applyToInteraction (arg: { phase: Interact.EventPhase, rect?: Interact.Rect }) {\n    const { interaction } = this\n    const { phase } = arg\n    const curCoords = interaction.coords.cur\n    const startCoords = interaction.coords.start\n    const { result, startDelta } = this\n    const curDelta = result.delta\n\n    if (phase === 'start') {\n      extend(this.startDelta, result.delta)\n    }\n\n    for (const [coordsSet, delta] of [[startCoords, startDelta], [curCoords, curDelta]] as const) {\n      coordsSet.page.x   += delta.x\n      coordsSet.page.y   += delta.y\n      coordsSet.client.x += delta.x\n      coordsSet.client.y += delta.y\n    }\n\n    const { rectDelta } = this.result\n    const rect = arg.rect || interaction.rect\n\n    rect.left   += rectDelta.left\n    rect.right  += rectDelta.right\n    rect.top    += rectDelta.top\n    rect.bottom += rectDelta.bottom\n\n    rect.width = rect.right - rect.left\n    rect.height = rect.bottom - rect.top\n  }\n\n  setAndApply (arg: Partial<Interact.DoAnyPhaseArg> & {\n    phase: Interact.EventPhase\n    preEnd?: boolean\n    skipModifiers?: number\n    modifiedCoords?: Interact.Point\n  }): void | false {\n    const { interaction } = this\n    const { phase, preEnd, skipModifiers } = arg\n\n    const result = this.setAll({\n      preEnd,\n      phase,\n      pageCoords: arg.modifiedCoords || interaction.coords.cur.page,\n    })\n\n    this.result = result\n\n    // don't fire an action move if a modifier would keep the event in the same\n    // cordinates as before\n    if (!result.changed && (!skipModifiers || skipModifiers < this.states.length) && interaction.interacting()) {\n      return false\n    }\n\n    if (arg.modifiedCoords) {\n      const { page } = interaction.coords.cur\n      const adjustment = {\n        x: arg.modifiedCoords.x - page.x,\n        y: arg.modifiedCoords.y - page.y,\n      }\n\n      result.coords.x += adjustment.x\n      result.coords.y += adjustment.y\n      result.delta.x += adjustment.x\n      result.delta.y += adjustment.y\n    }\n\n    this.applyToInteraction(arg)\n  }\n\n  beforeEnd (arg: Omit<Interact.DoAnyPhaseArg, 'iEvent'> & { state?: ModifierState }): void | false {\n    const { interaction, event } = arg\n    const states = this.states\n\n    if (!states || !states.length) {\n      return\n    }\n\n    let doPreend = false\n\n    for (const state of states) {\n      arg.state = state\n      const { options, methods } = state\n\n      const endPosition = methods.beforeEnd && methods.beforeEnd(arg as unknown as ModifierArg)\n\n      if (endPosition) {\n        this.endResult = endPosition\n        return false\n      }\n\n      doPreend = doPreend || (!doPreend && this.shouldDo(options, true, arg.phase, true))\n    }\n\n    if (doPreend) {\n      // trigger a final modified move before ending\n      interaction.move({ event, preEnd: true })\n    }\n  }\n\n  stop (arg: { interaction: Interact.Interaction }) {\n    const { interaction } = arg\n\n    if (!this.states || !this.states.length) {\n      return\n    }\n\n    const modifierArg: Partial<ModifierArg> = extend({\n      states: this.states,\n      interactable: interaction.interactable,\n      element: interaction.element,\n      rect: null,\n    }, arg)\n\n    this.fillArg(modifierArg)\n\n    for (const state of this.states) {\n      modifierArg.state = state\n\n      if (state.methods.stop) { state.methods.stop(modifierArg as ModifierArg) }\n    }\n\n    this.states = null\n    this.endResult = null\n  }\n\n  prepareStates (modifierList: Modifier[]) {\n    this.states = []\n\n    for (let index = 0; index < modifierList.length; index++) {\n      const { options, methods, name } = modifierList[index]\n\n      if (options && options.enabled === false) { continue }\n\n      this.states.push({\n        options,\n        methods,\n        index,\n        name,\n      })\n    }\n\n    return this.states\n  }\n\n  restoreInteractionCoords ({ interaction: { coords, rect, modification } }: { interaction: Interact.Interaction }) {\n    if (!modification.result) { return }\n\n    const { startDelta } = modification\n    const { delta: curDelta, rectDelta } = modification.result\n\n    const coordsAndDeltas = [\n      [coords.start, startDelta],\n      [coords.cur, curDelta],\n    ]\n\n    for (const [coordsSet, delta] of coordsAndDeltas as any) {\n      coordsSet.page.x -= delta.x\n      coordsSet.page.y -= delta.y\n      coordsSet.client.x -= delta.x\n      coordsSet.client.y -= delta.y\n    }\n\n    rect.left -= rectDelta.left\n    rect.right -= rectDelta.right\n    rect.top -= rectDelta.top\n    rect.bottom -= rectDelta.bottom\n  }\n\n  shouldDo (options, preEnd?: boolean, phase?: string, requireEndOnly?: boolean) {\n    if (\n      // ignore disabled modifiers\n      (!options || options.enabled === false) ||\n      // check if we require endOnly option to fire move before end\n      (requireEndOnly && !options.endOnly) ||\n      // don't apply endOnly modifiers when not ending\n      (options.endOnly && !preEnd) ||\n      // check if modifier should run be applied on start\n      (phase === 'start' && !options.setStart)\n    ) {\n      return false\n    }\n\n    return true\n  }\n\n  copyFrom (other: Modification) {\n    this.startOffset = other.startOffset\n    this.startDelta = other.startDelta\n    this.edges = other.edges\n    this.states = other.states.map(s => clone(s) as ModifierState)\n    this.result = createResult(extend({}, other.result.coords), extend({}, other.result.rect))\n  }\n\n  destroy () {\n    for (const prop in this) {\n      this[prop] = null\n    }\n  }\n}\n\nfunction createResult (coords?: Interact.Point, rect?: Interact.FullRect): ModificationResult {\n  return {\n    rect,\n    coords,\n    delta: { x: 0, y: 0 },\n    rectDelta: {\n      left  : 0,\n      right : 0,\n      top   : 0,\n      bottom: 0,\n    },\n    eventProps: [],\n    changed: true,\n  }\n}\n\nfunction getModifierList (interaction) {\n  const actionOptions = interaction.interactable.options[interaction.prepared.name]\n  const actionModifiers = actionOptions.modifiers\n\n  if (actionModifiers && actionModifiers.length) {\n    return actionModifiers.filter(\n      modifier => !modifier.options || modifier.options.enabled !== false,\n    )\n  }\n\n  return ['snap', 'snapSize', 'snapEdges', 'restrict', 'restrictEdges', 'restrictSize']\n    .map(type => {\n      const options = actionOptions[type]\n\n      return options && options.enabled && {\n        options,\n        methods: options._methods,\n      }\n    })\n    .filter(m => !!m)\n}\n\nexport function getRectOffset (rect, coords) {\n  return rect\n    ? {\n      left  : coords.x - rect.left,\n      top   : coords.y - rect.top,\n      right : rect.right  - coords.x,\n      bottom: rect.bottom - coords.y,\n    }\n    : {\n      left  : 0,\n      top   : 0,\n      right : 0,\n      bottom: 0,\n    }\n}\n"
	]
}