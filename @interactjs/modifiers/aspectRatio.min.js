import t from"../utils/extend.min.js";import{addEdges as e}from"../utils/rect.min.js";import o from"./Modification";import{makeModifier as i}from"./base";const r={start(e){const{state:i,rect:r,edges:s,pageCoords:a}=e;let{ratio:n}=i.options;const{equalDelta:d,modifiers:l}=i.options;"preserve"===n&&(n=r.width/r.height),i.startCoords=t({},a),i.startRect=t({},r),i.ratio=n,i.equalDelta=d;const c=i.linkedEdges={top:s.top||s.left&&!s.bottom,left:s.left||s.top&&!s.right,bottom:s.bottom||s.right&&!s.top,right:s.right||s.bottom&&!s.left};if(i.xIsPrimaryAxis=!(!s.left&&!s.right),i.equalDelta)i.edgeSign=(c.left?1:-1)*(c.top?1:-1);else{const t=i.xIsPrimaryAxis?c.top:c.left;i.edgeSign=t?-1:1}if(t(e.edges,c),!l||!l.length)return;const f=new o(e.interaction);f.copyFrom(e.interaction.modification),f.prepareStates(l),i.subModification=f,f.startAll({...e})},set(o){const{state:i,rect:r,coords:n}=o,d=t({},n),l=i.equalDelta?s:a;if(l(i,i.xIsPrimaryAxis,n,r),!i.subModification)return null;const c=t({},r);e(i.linkedEdges,c,{x:n.x-d.x,y:n.y-d.y});const f=i.subModification.setAll({...o,rect:c,edges:i.linkedEdges,pageCoords:n,prevCoords:n,prevRect:c}),{delta:g}=f;if(f.changed){l(i,Math.abs(g.x)>Math.abs(g.y),f.coords,f.rect),t(n,f.coords)}return f.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function s({startCoords:t,edgeSign:e},o,i){o?i.y=t.y+(i.x-t.x)*e:i.x=t.x+(i.y-t.y)*e}function a({startRect:t,startCoords:e,ratio:o,edgeSign:i},r,s,a){if(r){const r=a.width/o;s.y=e.y+(r-t.height)*i}else{const r=a.height*o;s.x=e.x+(r-t.width)*i}}export default i(r,"aspectRatio");export{r as aspectRatio};
//# sourceMappingURL=aspectRatio.min.js.map